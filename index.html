<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finanças em Dia</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
--bg:#020617;
--card:#0f172a;
--border:#1e293b;
--text:#e5e7eb;
--muted:#94a3b8;
--gradient:linear-gradient(135deg,#22c55e,#38bdf8);
}
.light{
--bg:#f8fafc;
--card:#ffffff;
--border:#e2e8f0;
--text:#020617;
--muted:#475569;
}

*{box-sizing:border-box;font-family:Inter,sans-serif}

body{
margin:0;
background:var(--bg);
color:var(--text);
min-height:100vh;
}

.hidden{
display:none !important;
visibility:hidden !important;
opacity:0 !important;
pointer-events:none !important;
}

/* AUTH */
.auth-container{
max-width:380px;
margin:80px auto;
background:var(--card);
border:1px solid var(--border);
border-radius:18px;
padding:20px;
}
.auth-tabs{
display:flex;
gap:10px;
margin-bottom:16px;
}
.auth-tabs button{
flex:1;
background:none;
border:1px solid var(--border);
color:var(--text);
}
.auth-tabs button.active{
background:var(--gradient);
color:#022c22;
font-weight:700;
}

input,button{
width:100%;
padding:12px;
margin-top:8px;
border-radius:12px;
border:1px solid var(--border);
background:transparent;
color:var(--text);
}
button{
background:var(--gradient);
border:none;
font-weight:700;
color:#022c22;
}

/* HEADER */
.header{
display:flex;
justify-content:space-between;
align-items:center;
padding:14px;
border-bottom:1px solid var(--border);
}
.logo{
font-weight:800;
background:var(--gradient);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}
.menu-btn{font-size:22px;cursor:pointer}

/* MENU */
.menu{
position:fixed;
top:0;left:0;
width:260px;
height:100%;
background:var(--card);
border-right:1px solid var(--border);
padding:16px;
transform:translateX(-100%);
transition:.3s;
z-index:20;
}
.menu.open{transform:translateX(0)}
.menu button{width:100%;margin-bottom:10px}

/* CARDS */
.card{
background:var(--card);
border:1px solid var(--border);
border-radius:16px;
padding:16px;
margin:16px;
}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu" class="menu hidden">
<button onclick="openSection('profile')">Perfil</button>
<button onclick="openSection('settings')">Configurações</button>
<button onclick="openSection('debts')">Gerir Dívidas</button>
<button onclick="logout()">Sair</button>
</div>

<!-- HEADER -->
<div id="header" class="header hidden">
<div class="menu-btn" onclick="toggleMenu()">☰</div>
<div class="logo">FINANÇAS EM DIA</div>
</div>

<!-- LOGIN / CADASTRO -->
<div id="auth" class="auth-container">
<div class="auth-tabs">
<button id="tabLogin" class="active" onclick="showLogin()">Entrar</button>
<button id="tabRegister" onclick="showRegister()">Criar conta</button>
</div>

<div id="loginForm">
<input id="loginUser" placeholder="Usuário">
<input id="loginPass" type="password" placeholder="Senha">
<button onclick="login()">Entrar</button>
</div>

<div id="registerForm" class="hidden">
<input id="regName" placeholder="Nome completo">
<input id="regUser" placeholder="Usuário">
<input id="regEmail" placeholder="Email">
<input id="regPass" type="password" placeholder="Senha">
<button onclick="register()">Cadastrar</button>
</div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">
<div id="chartSection" class="card">
<h3>Resumo</h3>
<canvas id="chart"></canvas>
</div>
</div>

<!-- PERFIL -->
<div id="profile" class="hidden card">
<h3>Perfil</h3>
<input id="profilePhone" placeholder="Telefone">
<input id="profilePass" type="password" placeholder="Nova senha">
<button onclick="saveProfile()">Salvar</button>
</div>

<!-- CONFIG -->
<div id="settings" class="hidden card">
<h3>Configurações</h3>
<button onclick="toggleTheme()">Alternar tema</button>
<label><input type="checkbox" id="showCharts" checked onchange="saveSettings()"> Mostrar gráficos</label>
</div>

<!-- DÍVIDAS -->
<div id="debts" class="hidden card">
<h3>Dívidas</h3>
<input id="dName" placeholder="Nome da dívida">
<input id="dValue" type="number" placeholder="Valor">
<button onclick="addDebt()">Adicionar</button>
<div id="debtList"></div>
</div>

<script>
let users = JSON.parse(localStorage.getItem("users")) || [];
let currentUser=null;

/* AUTH UI */
function showLogin(){
tabLogin.classList.add("active");
tabRegister.classList.remove("active");
loginForm.classList.remove("hidden");
registerForm.classList.add("hidden");
}
function showRegister(){
tabRegister.classList.add("active");
tabLogin.classList.remove("active");
registerForm.classList.remove("hidden");
loginForm.classList.add("hidden");
}

/* REGISTER */
function register(){
if(!regName.value||!regUser.value||!regEmail.value||!regPass.value)
return alert("Preencha tudo");

users.push({
name:regName.value,
user:regUser.value,
email:regEmail.value,
pass:regPass.value,
debts:[],
settings:{}
});
localStorage.setItem("users",JSON.stringify(users));
alert("Conta criada!");
showLogin();
}

/* LOGIN */
function login(){
const u=users.find(u=>u.user===loginUser.value && u.pass===loginPass.value);
if(!u)return alert("Login inválido");

currentUser=u;
auth.classList.add("hidden");
header.classList.remove("hidden");
menu.classList.remove("hidden");
dashboard.classList.remove("hidden");
renderChart();
}

/* MENU */
function toggleMenu(){menu.classList.toggle("open")}
function openSection(id){
dashboard.classList.add("hidden");
profile.classList.add("hidden");
settings.classList.add("hidden");
debts.classList.add("hidden");
document.getElementById(id).classList.remove("hidden");
menu.classList.remove("open");
}
function logout(){location.reload()}

/* PROFILE */
function saveProfile(){
if(profilePass.value)currentUser.pass=profilePass.value;
currentUser.phone=profilePhone.value;
save();
alert("Perfil salvo");
}

/* SETTINGS */
function toggleTheme(){document.body.classList.toggle("light")}
function saveSettings(){
currentUser.settings={showCharts:showCharts.checked};
save();
chartSection.style.display=showCharts.checked?"block":"none";
}

/* DÍVIDAS */
function addDebt(){
currentUser.debts.push({name:dName.value,value:+dValue.value});
dName.value="";dValue.value="";
save();renderDebts();renderChart();
}
function renderDebts(){
debtList.innerHTML="";
currentUser.debts.forEach((d,i)=>{
debtList.innerHTML+=`${d.name} - R$ ${d.value} <button onclick="removeDebt(${i})">X</button><br>`;
});
}
function removeDebt(i){
currentUser.debts.splice(i,1);
save();renderDebts();renderChart();
}

/* CHART */
function renderChart(){
if(!currentUser.debts)return;
let total=0;
currentUser.debts.forEach(d=>total+=d.value);
new Chart(chart,{type:"doughnut",data:{labels:["Dívidas"],datasets:[{data:[total]}]}});
}

/* STORAGE */
function save(){
localStorage.setItem("users",JSON.stringify(users));
}
</script>
</body>
</html>
