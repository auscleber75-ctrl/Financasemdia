<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finanças em Dia</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
--bg:#020617;
--card:rgba(255,255,255,.05);
--border:rgba(255,255,255,.1);
--text:#e5e7eb;
--muted:#94a3b8;
--gradient:linear-gradient(135deg,#22c55e,#38bdf8);
}
.light{
--bg:#f8fafc;
--card:#ffffff;
--border:#e2e8f0;
--text:#020617;
--muted:#475569;
}
*{box-sizing:border-box;font-family:Inter,sans-serif}
body{
margin:0;background:var(--bg);color:var(--text);
min-height:100vh;display:flex;justify-content:center;
padding:16px;
}
.app{max-width:420px;width:100%}
.hidden{display:none}

.logo{
text-align:center;font-size:28px;font-weight:800;
background:var(--gradient);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
margin-bottom:12px;
}

.card{
background:var(--card);
border:1px solid var(--border);
border-radius:18px;
padding:18px;
margin-bottom:14px;
}

label{font-size:12px;color:var(--muted)}
input,button{
width:100%;padding:12px;margin-top:6px;
border-radius:12px;border:1px solid var(--border);
background:transparent;color:var(--text);
}
button{
background:var(--gradient);
border:none;font-weight:700;color:#022c22;
}

.link{text-align:center;color:#38bdf8;cursor:pointer;margin-top:10px}

/* POPUP */
.overlay{
position:fixed;inset:0;
background:rgba(0,0,0,.6);
display:flex;align-items:center;justify-content:center;
z-index:10;
}
.popup{
background:var(--card);
border:1px solid var(--border);
border-radius:18px;
padding:20px;
text-align:center;
width:90%;max-width:320px;
}
</style>
</head>

<body>
<div class="app">

<div class="logo">FINANÇAS EM DIA</div>

<!-- LOGIN -->
<div id="loginCard" class="card">
<label>Usuário ou Email</label>
<input id="loginUser">
<label>Senha</label>
<input id="loginPass" type="password">
<button onclick="login()">Entrar</button>
<div class="link" onclick="showRegister()">Criar conta</div>
</div>

<!-- CADASTRO -->
<div id="registerCard" class="card hidden">
<label>Nome completo</label>
<input id="regName">
<label>Usuário</label>
<input id="regUser">
<label>Email</label>
<input id="regEmail">
<label>Senha</label>
<input id="regPass" type="password">
<button onclick="register()">Cadastrar</button>
<div class="link" onclick="showLogin()">Voltar</div>
</div>

<!-- POPUP (SÓ APÓS LOGIN) -->
<div id="welcomePopup" class="overlay hidden">
<div class="popup">
<h2 id="welcomeText"></h2>
<p style="color:var(--muted)">Deseja personalizar o tema?</p>
<button onclick="toggleTheme()">Alternar tema</button>
<button onclick="continueApp()">Continuar</button>
</div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">
<div class="card">
<h2>Dashboard</h2>
<canvas id="chart"></canvas>
</div>
</div>

</div>

<script>
let users = JSON.parse(localStorage.getItem("users")) || [];
let current = null;

/* UI */
function showRegister(){
loginCard.classList.add("hidden");
registerCard.classList.remove("hidden");
}
function showLogin(){
registerCard.classList.add("hidden");
loginCard.classList.remove("hidden");
}

/* AUTH */
function register(){
if(!regName.value||!regUser.value||!regEmail.value||!regPass.value)
return alert("Preencha tudo");

if(users.find(u=>u.user===regUser.value||u.email===regEmail.value))
return alert("Usuário ou email já existe");

users.push({
name:regName.value,
user:regUser.value,
email:regEmail.value,
pass:regPass.value,
theme:"dark"
});

localStorage.setItem("users",JSON.stringify(users));
alert("Conta criada!");
showLogin();
}

function login(){
const u = users.find(u =>
(u.user===loginUser.value || u.email===loginUser.value) &&
u.pass===loginPass.value
);
if(!u) return alert("Login inválido");

current = u;

/* GARANTIA ABSOLUTA */
loginCard.classList.add("hidden");
registerCard.classList.add("hidden");
welcomeText.innerText = `Bem-vindo(a), ${u.name.split(" ")[0]}!`;
welcomePopup.classList.remove("hidden");
}

/* POPUP */
function toggleTheme(){
current.theme = current.theme==="dark" ? "light" : "dark";
document.body.classList.toggle("light", current.theme==="light");
localStorage.setItem("users",JSON.stringify(users));
}

function continueApp(){
welcomePopup.classList.add("hidden");
dashboard.classList.remove("hidden");
renderChart();
}

/* DASH */
function renderChart(){
new Chart(chart,{
type:"doughnut",
data:{
labels:["Organizado","Ajustar"],
datasets:[{data:[70,30],backgroundColor:["#22c55e","#ef4444"]}]
}
});
}
</script>
</body>
</html>
