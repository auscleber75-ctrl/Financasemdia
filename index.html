<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FINANÇAS EM DIA</title>

<style>
:root {
  --bg: #020617;
  --card: #020617;
  --border: #1e293b;
  --text: #e5e7eb;
  --green: #22c55e;
  --red: #ef4444;
  --yellow: #facc15;
  --blue: #38bdf8;
}

* {
  box-sizing: border-box;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
}

body {
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 16px;
}

h1 {
  text-align: center;
  color: var(--green);
  margin-bottom: 16px;
}

.container {
  max-width: 480px;
  margin: auto;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px;
  margin-bottom: 12px;
}

input, button {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  font-size: 16px;
}

button {
  background: var(--green);
  color: #022c22;
  font-weight: bold;
  border: none;
}

.debt {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.badge {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 20px;
  width: fit-content;
}

.paid { background: var(--green); color: #022c22; }
.late { background: var(--red); }
.warning { background: var(--yellow); color: #422006; }

.actions {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

.actions button {
  flex: 1;
  background: var(--blue);
  color: #020617;
}

.remove {
  background: var(--red) !important;
  color: white !important;
}

.line {
  text-decoration: line-through;
  opacity: 0.5;
}
</style>
</head>

<body>

<h1>FINANÇAS EM DIA</h1>

<div class="container">

  <!-- ADD -->
  <div class="card">
    <input id="name" placeholder="Nome da dívida">
    <input id="value" type="number" placeholder="Valor (R$)">
    <input id="date" type="date">
    <button onclick="addDebt()">Adicionar</button>
  </div>

  <!-- LIST -->
  <div id="list"></div>

</div>

<script>
let debts = JSON.parse(localStorage.getItem("debts")) || [];

function save() {
  localStorage.setItem("debts", JSON.stringify(debts));
  render();
}

function addDebt() {
  const name = nameInput.value;
  const value = valueInput.value;
  const date = dateInput.value;

  if (!name || !value || !date) {
    alert("Preencha todos os campos");
    return;
  }

  debts.push({ name, value, date, paid: false });
  nameInput.value = valueInput.value = dateInput.value = "";
  save();
}

function togglePaid(i) {
  debts[i].paid = !debts[i].paid;
  save();
}

function removeDebt(i) {
  debts.splice(i, 1);
  save();
}

function status(debt) {
  if (debt.paid) return "paid";

  const today = new Date();
  const due = new Date(debt.date);
  const diff = (due - today) / (1000 * 60 * 60 * 24);

  if (diff < 0) return "late";
  if (diff <= 3) return "warning";
  return "";
}

function render() {
  list.innerHTML = "";

  debts.forEach((d, i) => {
    const s = status(d);

    list.innerHTML += `
      <div class="card debt ${d.paid ? "line" : ""}">
        <strong>${d.name}</strong>
        <span>R$ ${d.value}</span>
        <span>Vencimento: ${new Date(d.date).toLocaleDateString()}</span>
        ${s ? `<span class="badge ${s}">
          ${s === "paid" ? "PAGA" : s === "late" ? "ATRASADA" : "VENCE EM BREVE"}
        </span>` : ""}
        <div class="actions">
          <button onclick="togglePaid(${i})">${d.paid ? "Desfazer" : "Pagar"}</button>
          <button class="remove" onclick="removeDebt(${i})">Remover</button>
        </div>
      </div>
    `;
  });
}

const nameInput = document.getElementById("name");
const valueInput = document.getElementById("value");
const dateInput = document.getElementById("date");
const list = document.getElementById("list");

render();
</script>

</body>
</html>
